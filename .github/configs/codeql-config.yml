# CodeQL Configuration for UIForge Projects
# This configuration provides unified security analysis across all projects

name: "UIForge Security Analysis"

# Languages to analyze
languages:
  - python
  - typescript
  - javascript

# Query packs to use
queries:
  # Security and quality queries
  - uses: security-and-quality
  - uses: security-extended

  # Custom security queries for specific vulnerabilities
  - name: Custom Security Queries
    uses: ./custom-queries

# Paths to include in analysis
paths:
  - apps/
  - src/
  - lib/
  - scripts/

# Paths to exclude from analysis
paths-ignore:
  # Test files
  - "**/tests/"
  - "**/test/"
  - "**/__tests__/"
  - "**/*.test.*"
  - "**/*.spec.*"

  # Build artifacts
  - "**/dist/"
  - "**/build/"
  - "**/out/"

  # Dependencies
  - "**/node_modules/"
  - "**/vendor/"
  - "**/third_party/"

  # Generated files
  - "**/*.generated.*"
  - "**/generated/"

  # Documentation
  - "**/docs/"
  - "**/*.md"

  # Configuration files
  - "**/*.config.*"
  - "**/.*"

# Query execution configuration
query-execution:
  # Timeout for query execution (in seconds)
  timeout: 1200

  # Number of CPU cores to use
  cpu_cores: 2

  # Memory limit (in MB)
  memory_limit: 4096

# Pack configuration
packs:
  # Security pack
  - name: security
    version: latest

  # Quality pack
  - name: quality
    version: latest

# Extraction configuration
extraction:
  # JavaScript/TypeScript extraction
  javascript:
    # Extract from .js files
    js: true
    # Extract from .jsx files
    jsx: true
    # Extract from .ts files
    ts: true
    # Extract from .tsx files
    tsx: true

  # Python extraction
  python:
    # Extract from .py files
    py: true

# Database configuration
database:
  # Database location
  location: ${{ github.workspace }}/.codeql-databases

  # Database cluster
  cluster: default

  # Database language
  language: auto

# SARIF configuration
sarif:
  # Include source code snippets in SARIF results
  include_source_code_snippets: true

  # Include rule help text in SARIF results
  include_rule_help_text: true

  # Group results by rule
  group_results_by_rule: true

# Alert configuration
alerts:
  # Minimum severity level for alerts
  minimum_severity: medium

  # Maximum number of alerts to report
  maximum_alerts: 1000

  # Include alerts from third-party code
  include_third_party_alerts: false

# Custom query configuration
custom_queries:
  # Directory containing custom queries
  directory: .github/codeql-queries

  # Custom query packs
  packs:
    - name: uiforge-security
      version: latest

# Performance configuration
performance:
  # Enable performance optimization
  enable_optimization: true

  # Cache results between runs
  cache_results: true

  # Parallel execution
  parallel_execution: true

# Reporting configuration
reporting:
  # Generate summary report
  summary: true

  # Generate detailed report
  detailed: true

  # Report format
  format: sarif

  # Report output directory
  output_directory: codeql-reports

# Integration configuration
integrations:
  # GitHub integration
  github:
    # Upload SARIF results to GitHub
    upload_sarif: true

    # Create GitHub issues for alerts
    create_issues: false

    # Add comments to PRs
    comment_on_pr: true

# Environment-specific configuration
environments:
  # Development environment
  development:
    # Include debug information
    debug: true

    # Verbose logging
    verbose: true

  # Production environment
  production:
    # Optimize for performance
    optimize: true

    # Minimal logging
    verbose: false

# Project-specific overrides can be defined here
# Each project can extend this configuration with project-specific settings
